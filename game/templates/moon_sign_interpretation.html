<!-- Include this at the beginning of your HTML file -->
<script>
    function updateMoonSignChoices() {
        let choices = ["positive", "negative", "ambiguous1", "ambiguous2"];
    
        // Mapping of IDs to their current values
        let currentValues = {
            'first_quarter': document.getElementById('id_first_quarter').value,
            'full_moon': document.getElementById('id_full_moon').value,
            'last_quarter': document.getElementById('id_last_quarter').value,
            'new_moon': document.getElementById('id_new_moon').value,
        };
    
        // Loop through all choices and disable them in other selects if they are already selected
        for (let choice of choices) {
            for (let key in currentValues) {
                if (currentValues[key] !== choice) {
                    let selects = document.querySelectorAll(`select:not(#id_${key}) option[value="${choice}"]`);
                    for (let select of selects) {
                        select.disabled = currentValues[key] !== "";
                    }
                }
            }
        }
    }
    
    window.onload = function() {
        // Attach the function to each select element's onchange event
        document.getElementById('id_first_quarter').onchange = updateMoonSignChoices;
        document.getElementById('id_full_moon').onchange = updateMoonSignChoices;
        document.getElementById('id_last_quarter').onchange = updateMoonSignChoices;
        document.getElementById('id_new_moon').onchange = updateMoonSignChoices;
    
        // Initialize once on page load
        updateMoonSignChoices();
    };
    </script>
    

<div class="moon-sign-interpretation">
    <h2>Moon Sign Interpretation</h2>
    <p>Please fill out your interpretations for each phase of the moon.</p>
    <form method="post" action="{% url 'character_creation' game_id %}">
        {% csrf_token %}
        <div class="form-group">
            <h3>First Quarter</h3>
            {{ form.first_quarter.label_tag }}<br>
            {{ form.first_quarter }}
            {{ form.first_quarter_reason.label_tag }}<br>
            {{ form.first_quarter_reason }}
        </div>

        <div class="form-group">
            <h3>Full Moon</h3>
            {{ form.full_moon.label_tag }}<br>
            {{ form.full_moon }}
            {{ form.full_moon_reason.label_tag }}<br>
            {{ form.full_moon_reason }}
        </div>

        <div class="form-group">
            <h3>Last Quarter</h3>
            {{ form.last_quarter.label_tag }}<br>
            {{ form.last_quarter }}
            {{ form.last_quarter_reason.label_tag }}<br>
            {{ form.last_quarter_reason }}
        </div>

        <div class="form-group">
            <h3>New Moon</h3>
            {{ form.new_moon.label_tag }}<br>
            {{ form.new_moon }}
            {{ form.new_moon_reason.label_tag }}<br>
            {{ form.new_moon_reason }}
        </div>

        <button type="submit" class="confirm-btn">Submit Interpretations</button>
    </form>
</div>





